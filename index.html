<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="theme-color" content="#0b0b0b">
<title>Oxyshare</title>
<style>
  @keyframes fadeIn { from { opacity: 0; transform: translateY(10px);} to { opacity: 1; transform: translateY(0);} }
  body {
    margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
    background: #0b0b0b; color: #fff; height: 100vh; overflow: hidden;
  }
  header {
    text-align: center; font-size: 1.4em; padding: 1rem; backdrop-filter: blur(20px);
    background: rgba(255,255,255,0.05); border-bottom: 1px solid rgba(255,255,255,0.1);
  }
  #main {
    display: flex; flex-direction: column; height: calc(100vh - 60px);
    overflow-y: auto; animation: fadeIn .4s ease;
  }
  .menu { display: flex; justify-content: space-around; padding: .8rem; border-top: 1px solid rgba(255,255,255,0.1);
           backdrop-filter: blur(20px); position: fixed; bottom: 0; width: 100%; background: rgba(0,0,0,0.6);}
  .menu button {
    background: none; border: none; color: white; font-size: 1em; font-weight: 500;
    transition: 0.3s; padding: 0.5rem 1rem; border-radius: 12px;
  }
  .menu button.active, .menu button:hover { background: rgba(255,255,255,0.15);}
  .section { display: none; padding: 1rem;}
  .section.active { display: block; animation: fadeIn .4s ease;}
  .card {
    background: rgba(255,255,255,0.06); border-radius: 20px; padding: 1rem; margin: .5rem 0;
    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
  }
  .block {
    background: rgba(255,255,255,0.08); padding: .8rem; border-radius: 14px; margin: .5rem 0;
    border-left: 4px solid #007aff; cursor: grab; transition: 0.2s;
  }
  .block:hover { background: rgba(255,255,255,0.12);}
  input, textarea {
    width: 100%; border: none; border-radius: 12px; padding: .6rem;
    background: rgba(255,255,255,0.08); color: white; margin-top: .4rem;
  }
  .button {
    background: #007aff; border: none; color: white; font-weight: 600; padding: .7rem 1rem;
    border-radius: 14px; width: 100%; margin-top: .8rem;
  }
  #uploadLabel {
    display: block; border: 2px dashed rgba(255,255,255,0.3); padding: 2rem; border-radius: 16px; text-align: center;
  }
</style>
</head>
<body>
<header>Oxyshare</header>

<div id="main">
  <div id="apps" class="section active">
    <h2>My Apps</h2>
    <div id="appList"></div>
    <button class="button" onclick="showSection('create')">+ New App</button>
  </div>

  <div id="create" class="section">
    <h2>Create App</h2>
    <div class="card">
      <h3>Option 1: Build with Blocks</h3>
      <div id="blockArea"></div>
      <button class="button" onclick="addBlock()">+ Add Block</button>
      <button class="button" onclick="saveApp()">Save App</button>
    </div>

    <div class="card">
      <h3>Option 2: Upload HTML App</h3>
      <label id="uploadLabel">
        Upload your index.html
        <input type="file" id="htmlUpload" accept=".html" style="display:none">
      </label>
    </div>
  </div>

  <div id="explore" class="section">
    <h2>Explore</h2>
    <p style="opacity:.7;">Community sharing coming soon.</p>
  </div>
</div>

<div class="menu">
  <button id="menu-apps" class="active" onclick="showSection('apps')">Apps</button>
  <button id="menu-create" onclick="showSection('create')">Create</button>
  <button id="menu-explore" onclick="showSection('explore')">Explore</button>
</div>

<script>
const blockTypes = [
  "Click screen [x] times", "Show notification [text]", "Download [file]",
  "Wait [seconds]", "Open URL [link]", "Vibrate [duration]",
  "Alert [message]", "Prompt input [label]", "If [condition] then [action]",
  "Loop [times]", "Play sound [file]", "Change background [color]",
  "Set variable [name=value]", "Log [text]", "Get time",
  "Ask permission [type]", "Send message [text]", "Show alert [text]",
  "Run automation [name]", "Stop automation"
];

function showSection(name){
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.querySelector(`#${name}`).classList.add('active');
  document.querySelectorAll('.menu button').forEach(b=>b.classList.remove('active'));
  document.querySelector(`#menu-${name}`).classList.add('active');
}

function addBlock(){
  const blockArea=document.getElementById('blockArea');
  const div=document.createElement('div');
  div.className='block';
  div.textContent=blockTypes[Math.floor(Math.random()*blockTypes.length)];
  blockArea.appendChild(div);
}

function saveApp(){
  const name=prompt("App name:");
  if(!name)return;
  const blocks=[...document.querySelectorAll('.block')].map(b=>b.textContent);
  const apps=JSON.parse(localStorage.getItem('oxy_apps')||'[]');
  apps.push({name, blocks});
  localStorage.setItem('oxy_apps', JSON.stringify(apps));
  updateAppList();
  showSection('apps');
}

function updateAppList(){
  const list=document.getElementById('appList');
  list.innerHTML='';
  const apps=JSON.parse(localStorage.getItem('oxy_apps')||'[]');
  apps.forEach(app=>{
    const div=document.createElement('div');
    div.className='card';
    div.innerHTML=`<strong>${app.name}</strong><br><small>${app.blocks.length} blocks</small><br><button class='button' style='margin-top:.5rem' onclick='runApp("${app.name}")'>Run</button>`;
    list.appendChild(div);
  });
}

function runApp(name){
  const apps=JSON.parse(localStorage.getItem('oxy_apps')||'[]');
  const app=apps.find(a=>a.name===name);
  if(!app)return alert("App not found");
  alert("Running "+name+"...\nActions:\n"+app.blocks.join('\n'));
}

document.getElementById('htmlUpload').addEventListener('change', e=>{
  const file=e.target.files[0];
  if(file){
    const reader=new FileReader();
    reader.onload=()=>{
      const name=prompt("App name:");
      const apps=JSON.parse(localStorage.getItem('oxy_apps')||'[]');
      apps.push({name, html: reader.result});
      localStorage.setItem('oxy_apps', JSON.stringify(apps));
      updateAppList();
      showSection('apps');
    };
    reader.readAsText(file);
  }
});

updateAppList();
</script>
</body>
</html>
